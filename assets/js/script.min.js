let $toggler=document.getElementById("toggler"),$calculator=document.querySelector(".calculator");$calculator.classList.contains("dark")?($toggler.querySelector("#light").style.display="block",$toggler.querySelector("#dark").style.display="none"):($toggler.querySelector("#light").style.display="none",$toggler.querySelector("#dark").style.display="block"),$toggler.addEventListener("click",function(){$calculator.classList.toggle("dark"),$calculator.classList.contains("dark")?($toggler.querySelector("#light").style.display="block",$toggler.querySelector("#dark").style.display="none"):($toggler.querySelector("#light").style.display="none",$toggler.querySelector("#dark").style.display="block")});class Calculator{constructor(e,t){this.previousOperandTextElement=e,this.currentOperandTextElement=t,this.clear()}clear(){this.currentOperand="",this.previousOperand="",this.operation=void 0}delete(){this.currentOperand=this.currentOperand.toString().slice(0,-1)}appendNumber(e){"."===e&&this.currentOperand.includes(".")||(this.currentOperand=this.currentOperand.toString()+e.toString())}chooseOperation(e){""!==this.currentOperand&&(""!==this.previousOperand&&this.compute(),this.operation=e,this.previousOperand=this.currentOperand,this.currentOperand="")}compute(){let e,t=parseFloat(this.previousOperand),r=parseFloat(this.currentOperand);if(!(isNaN(t)||isNaN(r))){switch(this.operation){case"+":e=t+r;break;case"-":e=t-r;break;case"*":e=t*r;break;case"\xf7":e=t/r;break;default:return}this.currentOperand=e,this.operation=void 0,this.previousOperand=""}}getDisplayNumber(e){let t=e.toString(),r=parseFloat(t.split(".")[0]),a=t.split(".")[1],l;return(l=isNaN(r)?"":r.toLocaleString("en",{maximumFractionDigits:0}),null!=a)?`${l}.${a}`:l}updateDisplay(){this.currentOperandTextElement.innerText=this.getDisplayNumber(this.currentOperand),null!=this.operation?this.previousOperandTextElement.innerText=`${this.getDisplayNumber(this.previousOperand)} ${this.operation}`:this.previousOperandTextElement.innerText=""}}const numberButtons=document.querySelectorAll("[data-number]"),operationButtons=document.querySelectorAll("[data-operation]"),equalsButton=document.querySelector("[data-equals]"),deleteButton=document.querySelector("[data-delete]"),allClearButton=document.querySelector("[data-all-clear]"),previousOperandTextElement=document.querySelector("[data-previous-operand]"),currentOperandTextElement=document.querySelector("[data-current-operand]"),calculator=new Calculator(previousOperandTextElement,currentOperandTextElement);numberButtons.forEach(e=>{e.addEventListener("click",()=>{calculator.appendNumber(e.innerText),calculator.updateDisplay()})}),operationButtons.forEach(e=>{e.addEventListener("click",()=>{calculator.chooseOperation(e.innerText),calculator.updateDisplay()})}),equalsButton.addEventListener("click",e=>{calculator.compute(),calculator.updateDisplay(),console.log(equalsButton)}),allClearButton.addEventListener("click",e=>{calculator.clear(),calculator.updateDisplay()}),deleteButton.addEventListener("click",e=>{calculator.delete(),calculator.updateDisplay()}),document.addEventListener("keydown",function(e){e.key.match(/[0-9]/g)&&(e.preventDefault(),calculator.appendNumber(e.key),calculator.updateDisplay()),"."===e.key&&(e.preventDefault(),calculator.appendNumber(e.key),calculator.updateDisplay()),e.key.match(/[+\-*\/]/g)&&(e.preventDefault(),calculator.chooseOperation(e.key),calculator.updateDisplay()),("Enter"===e.key||"="===e.key)&&(e.preventDefault(),calculator.compute(),calculator.updateDisplay()),"Backspace"===e.key&&(e.preventDefault(),calculator.delete(),calculator.updateDisplay()),"Delete"==e.key&&(e.preventDefault(),calculator.clear(),calculator.updateDisplay())});